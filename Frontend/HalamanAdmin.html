<!DOCTYPE html>
<html>
  <head>
    <title>Admin Page</title>
    <link rel="stylesheet" type="text/css" href="./style.css" />
  </head>
  <body>
    <div class="container">
      <h2>Welcome, Admin!</h2>
      <h2>Upload File</h2>
      <form
        id="uploadForm"
        action="/upload"
        method="POST"
        enctype="multipart/form-data"
      >
        <input type="text" placeholder="judul" name="filename" required />
        <input type="text" placeholder="deskripsi" name="deskripsi" required />
        <input type="text" placeholder="nama pengunggah" name="nama_pengunggah" required />
        <input type="file" name="file" required />
        <br />
        <input type="submit" value="Upload" />
      </form>
      <h2>Daftar File Dokument</h2>
      <a href="./index.html">Logout</a>
    </div>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      const uploadForm = document.getElementById("uploadForm");

      uploadForm.addEventListener("submit", (e) => {
        e.preventDefault();

        const formData = new FormData(uploadForm);

        axios.post("http://localhost:5001/api/route/upload", formData, {
            headers: {
              "Content-Type": "multipart/form-data",
            },
          })
          .then((response) => {
            console.log(response.data);
            alert("File uploaded successfully");
          })
          .catch((error) => {
            console.error(error.data);
            alert("Terjadi kesalahan saat mengupload file");
          });
      });
    </script>
  </body>
</html>
